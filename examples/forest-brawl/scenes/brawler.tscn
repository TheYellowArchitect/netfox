[gd_scene load_steps=29 format=3 uid="uid://wi4owat0bml3"]

[ext_resource type="Script" path="res://examples/forest-brawl/scripts/brawler-controller.gd" id="1_np8na"]
[ext_resource type="Script" path="res://examples/forest-brawl/scripts/brawler-input.gd" id="2_m3v43"]
[ext_resource type="Script" path="res://examples/forest-brawl/scripts/play-random-3d.gd" id="3_rcsmp"]
[ext_resource type="Script" path="res://examples/forest-brawl/scripts/brawler-weapon.gd" id="4_0hvdj"]
[ext_resource type="AudioStream" uid="uid://cih2i8xa2v2is" path="res://examples/forest-brawl/sounds/fall1.wav" id="4_mw5vb"]
[ext_resource type="PackedScene" uid="uid://8sru5hge6spx" path="res://examples/forest-brawl/scenes/bomb-projectile.tscn" id="5_a4qop"]
[ext_resource type="AudioStream" uid="uid://4oilc8k83mmt" path="res://examples/forest-brawl/sounds/fall2.wav" id="5_kqmf5"]
[ext_resource type="AudioStream" uid="uid://b03phi3tfl21k" path="res://examples/forest-brawl/sounds/whoosh.wav" id="6_gh8ps"]
[ext_resource type="AudioStream" uid="uid://cegpnj82f4gio" path="res://examples/forest-brawl/sounds/fall3.wav" id="6_jc44e"]
[ext_resource type="Script" path="res://examples/forest-brawl/scripts/displaceable.gd" id="6_ygmle"]
[ext_resource type="Script" path="res://addons/netfox/rollback/rollback-synchronizer.gd" id="7_cmfmx"]
[ext_resource type="PackedScene" uid="uid://fctd5hkxnf2y" path="res://examples/forest-brawl/models/player/bomber-guy.glb" id="7_ij3cr"]
[ext_resource type="Script" path="res://addons/netfox/tick-interpolator.gd" id="8_pj7o0"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gdp4i"]
animation = &"Float"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_qv2tk"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rss6c"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7lmj4"]
animation = &"Run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7yjg4"]
animation = &"Strafe_L"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_v2fmc"]
animation = &"Strafe_R"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tp0nc"]
animation = &"Backpedal"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_blhbt"]
blend_point_0/node = SubResource("AnimationNodeAnimation_rss6c")
blend_point_0/pos = Vector2(0, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_7lmj4")
blend_point_1/pos = Vector2(0, 1)
blend_point_2/node = SubResource("AnimationNodeAnimation_7yjg4")
blend_point_2/pos = Vector2(1, 0)
blend_point_3/node = SubResource("AnimationNodeAnimation_v2fmc")
blend_point_3/pos = Vector2(-1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_tp0nc")
blend_point_4/pos = Vector2(0, -1)
min_space = Vector2(-4, -1)
max_space = Vector2(4, 1)

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_2k2qg"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_w05vo"]
animation = &"Throw"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_byyqa"]
filter_enabled = true
filters = ["rig/Skeleton3D:DEF-breast.L", "rig/Skeleton3D:DEF-breast.R", "rig/Skeleton3D:DEF-forearm.L", "rig/Skeleton3D:DEF-forearm.L.001", "rig/Skeleton3D:DEF-forearm.R", "rig/Skeleton3D:DEF-forearm.R.001", "rig/Skeleton3D:DEF-hand.L", "rig/Skeleton3D:DEF-hand.R", "rig/Skeleton3D:DEF-shoulder.L", "rig/Skeleton3D:DEF-shoulder.R", "rig/Skeleton3D:DEF-spine", "rig/Skeleton3D:DEF-spine.001", "rig/Skeleton3D:DEF-spine.002", "rig/Skeleton3D:DEF-spine.003", "rig/Skeleton3D:DEF-spine.004", "rig/Skeleton3D:DEF-spine.005", "rig/Skeleton3D:DEF-spine.006", "rig/Skeleton3D:DEF-upper_arm.L", "rig/Skeleton3D:DEF-upper_arm.L.001", "rig/Skeleton3D:DEF-upper_arm.R", "rig/Skeleton3D:DEF-upper_arm.R.001"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_ofns8"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_8to0y"]
graph_offset = Vector2(-629.987, -38.9762)
nodes/Float/node = SubResource("AnimationNodeBlend2_qv2tk")
nodes/Float/position = Vector2(-80, 0)
"nodes/Float Anim/node" = SubResource("AnimationNodeAnimation_gdp4i")
"nodes/Float Anim/position" = Vector2(-280, 120)
nodes/Move/node = SubResource("AnimationNodeBlendSpace2D_blhbt")
nodes/Move/position = Vector2(-480, -40)
nodes/MoveScale/node = SubResource("AnimationNodeTimeScale_2k2qg")
nodes/MoveScale/position = Vector2(-280, -40)
nodes/Throw/node = SubResource("AnimationNodeOneShot_byyqa")
nodes/Throw/position = Vector2(100, 20)
"nodes/Throw Anim/node" = SubResource("AnimationNodeAnimation_w05vo")
"nodes/Throw Anim/position" = Vector2(-280, 260)
nodes/ThrowScale/node = SubResource("AnimationNodeTimeScale_ofns8")
nodes/ThrowScale/position = Vector2(-100, 260)
nodes/output/position = Vector2(320, 80)
node_connections = [&"output", 0, &"Throw", &"Float", 0, &"MoveScale", &"Float", 1, &"Float Anim", &"MoveScale", 0, &"Move", &"Throw", 0, &"Float", &"Throw", 1, &"ThrowScale", &"ThrowScale", 0, &"Throw Anim"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qgusj"]
radius = 0.25
height = 1.02102

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_4cjl8"]
properties/0/path = NodePath(".:player_name")
properties/0/spawn = true
properties/0/sync = false
properties/0/watch = true
properties/1/path = NodePath(".:visible")
properties/1/spawn = true
properties/1/sync = false
properties/1/watch = true

[node name="Brawler" type="CharacterBody3D" groups=["Brawlers"]]
script = ExtResource("1_np8na")
speed = 4.0
death_depth = 16.0
respawn_time = 8.0

[node name="bomber-guy" parent="." instance=ExtResource("7_ij3cr")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5, 0)

[node name="Skeleton3D" parent="bomber-guy/rig" index="0"]
bones/0/position = Vector3(3.20917e-15, 0.539854, -0.0688332)
bones/0/rotation = Quaternion(0.255292, -7.97688e-15, 1.00226e-14, 0.966864)
bones/1/rotation = Quaternion(-0.0131631, 1.19199e-07, -1.56918e-09, 0.999913)
bones/1/scale = Vector3(1.01567, 0.969373, 1.01567)
bones/2/rotation = Quaternion(0.0174304, -3.28848e-13, 4.15636e-09, 0.999848)
bones/2/scale = Vector3(1.04934, 0.908112, 1.04939)
bones/3/rotation = Quaternion(-0.117808, -1.18379e-07, -1.40437e-08, 0.993036)
bones/3/scale = Vector3(0.938281, 1.12625, 0.949847)
bones/4/rotation = Quaternion(0.338494, 1.12172e-07, 4.03516e-08, 0.940969)
bones/4/scale = Vector3(0.967361, 1.06862, 0.967361)
bones/5/rotation = Quaternion(-0.0861933, 1.20735e-10, -2.05651e-08, 0.996279)
bones/5/scale = Vector3(1.00005, 1.00319, 0.997358)
bones/6/rotation = Quaternion(-0.346758, -1.11813e-07, -4.13368e-08, 0.937955)
bones/6/scale = Vector3(1.0337, 0.978468, 0.993471)
bones/7/position = Vector3(-3.6176e-08, 0.539854, -0.0688332)
bones/7/rotation = Quaternion(-0.135651, -0.571304, -0.59224, 0.551781)
bones/8/position = Vector3(3.6176e-08, 0.539854, -0.0688332)
bones/8/rotation = Quaternion(-0.135651, 0.571304, 0.59224, 0.551781)
bones/9/position = Vector3(0.185305, 0.56789, -0.0134034)
bones/9/rotation = Quaternion(0.87591, -1.03118e-05, -0.000111526, 0.482476)
bones/9/scale = Vector3(1.00998, 0.980343, 1.00998)
bones/10/rotation = Quaternion(1.23085e-07, -5.52346e-06, -2.98159e-11, 1)
bones/11/rotation = Quaternion(0.508443, 6.68211e-07, -3.31581e-05, 0.861096)
bones/11/scale = Vector3(1.00198, 0.973612, 1.0254)
bones/12/rotation = Quaternion(-9.67563e-08, 8.29257e-06, -2.16274e-09, 1)
bones/13/rotation = Quaternion(-0.566779, 0.000110908, 1.13155e-05, 0.82387)
bones/13/scale = Vector3(0.988157, 0.992785, 1.01963)
bones/14/rotation = Quaternion(5.02433e-08, 0.977548, -0.210714, 2.33145e-07)
bones/14/scale = Vector3(0.99948, 1.00078, 0.999746)
bones/15/position = Vector3(-0.185305, 0.56789, -0.0134034)
bones/15/rotation = Quaternion(0.996569, 4.5368e-05, -0.000130226, -0.0827628)
bones/15/scale = Vector3(1.0081, 0.984002, 1.0081)
bones/17/rotation = Quaternion(0.460488, 1.4422e-05, -3.93519e-05, 0.887666)
bones/17/scale = Vector3(1.0016, 0.980632, 1.01839)
bones/18/rotation = Quaternion(-4.84353e-08, 4.04099e-06, 1.10813e-08, 1)
bones/19/rotation = Quaternion(-0.906042, 8.57267e-05, 7.43589e-05, 0.423189)
bones/19/scale = Vector3(0.990241, 1.00248, 1.00778)
bones/20/rotation = Quaternion(1.02643e-08, 0.977516, -0.210861, -2.46051e-07)
bones/20/scale = Vector3(1.00003, 0.999961, 1.00001)
bones/21/position = Vector3(0.0507796, 1.02048, 0.270122)
bones/21/rotation = Quaternion(-0.508111, -0.290336, -0.402688, 0.703826)
bones/22/position = Vector3(0.242455, 1.02959, 0.172916)
bones/22/rotation = Quaternion(-0.339038, 0.241433, -0.797253, 0.437209)
bones/22/scale = Vector3(1.12747, 0.786669, 1.12747)
bones/23/rotation = Quaternion(6.68784e-09, 0.054106, 1.17316e-08, 0.998535)
bones/24/rotation = Quaternion(0.57423, 0.170245, -0.428192, 0.676704)
bones/24/scale = Vector3(0.896123, 0.990868, 1.16138)
bones/25/rotation = Quaternion(-8.37126e-09, -0.0293802, -4.29542e-08, 0.999568)
bones/26/rotation = Quaternion(0.0631054, -0.0315709, 0.0420517, 0.996621)
bones/26/scale = Vector3(1.05515, 0.900522, 1.05367)
bones/27/position = Vector3(-0.0507796, 1.02048, 0.270122)
bones/27/rotation = Quaternion(-0.508111, 0.290336, 0.402688, 0.703826)
bones/28/position = Vector3(-0.242455, 1.02959, 0.172916)
bones/28/rotation = Quaternion(-0.448643, -0.385834, 0.615265, 0.520866)
bones/28/scale = Vector3(0.971373, 1.05981, 0.971373)
bones/29/rotation = Quaternion(1.88805e-08, -0.00671556, -1.13412e-07, 0.999978)
bones/30/rotation = Quaternion(0.245547, -0.0955129, 0.32016, 0.90999)
bones/30/scale = Vector3(1.13753, 0.774495, 1.14054)
bones/31/rotation = Quaternion(-5.69782e-08, -0.133292, 6.07938e-08, 0.991077)
bones/32/rotation = Quaternion(0.407167, -0.125702, 0.26394, 0.865303)
bones/32/scale = Vector3(0.93705, 1.02226, 1.13088)
bones/33/position = Vector3(0.1184, 0.98706, 0.135816)
bones/33/rotation = Quaternion(-1.20165e-14, 0.585119, 0.810947, -1.98123e-14)
bones/34/position = Vector3(-0.1184, 0.98706, 0.135816)
bones/34/rotation = Quaternion(-1.20165e-14, 0.585119, 0.810947, -1.98123e-14)

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_8to0y")
anim_player = NodePath("../bomber-guy/AnimationPlayer")
active = true
parameters/Float/blend_amount = 0.0
parameters/Move/blend_position = Vector2(0, 0)
parameters/MoveScale/scale = 1.0
parameters/Throw/active = false
parameters/Throw/internal_active = false
parameters/Throw/request = 0
parameters/ThrowScale/scale = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_qgusj")

[node name="Nametag" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
pixel_size = 0.0007
billboard = 1
fixed_size = true
text = "Nameless Brawler"
width = 128.0

[node name="Fall Sound" type="AudioStreamPlayer3D" parent="."]
script = ExtResource("3_rcsmp")
sounds = Array[AudioStream]([ExtResource("4_mw5vb"), ExtResource("5_kqmf5"), ExtResource("6_jc44e")])

[node name="Input" type="Node" parent="."]
script = ExtResource("2_m3v43")

[node name="Weapon" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.5)
script = ExtResource("4_0hvdj")
projectile = ExtResource("5_a4qop")
fire_cooldown = 0.5

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="Weapon"]
stream = ExtResource("6_gh8ps")

[node name="Displaceable" type="Node3D" parent="."]
script = ExtResource("6_ygmle")
mass = 4.0

[node name="RollbackSynchronizer" type="Node" parent="." node_paths=PackedStringArray("root")]
script = ExtResource("7_cmfmx")
root = NodePath("..")
state_properties = Array[String]([":transform", ":velocity", ":speed", "Displaceable:mass", "Displaceable:impulse"])
input_properties = Array[String](["Input:movement", "Input:aim"])
enable_input_broadcast = false

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_4cjl8")

[node name="TickInterpolator" type="Node" parent="." node_paths=PackedStringArray("root")]
script = ExtResource("8_pj7o0")
root = NodePath("..")
properties = Array[String]([":transform"])

[editable path="bomber-guy"]
